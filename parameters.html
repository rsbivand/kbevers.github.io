

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Parameters &mdash; proj.4 4.9.3 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="proj.4 4.9.3 documentation" href="index.html"/>
        <link rel="next" title="Geodesic Calculations" href="geodesic.html"/>
        <link rel="prev" title="Winkel Tripel" href="projections/wintri.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> proj.4
          

          
          </a>

          
            
            
              <div class="version">
                4.9.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="apps/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="projections/index.html">Projections</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Parameters</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#parameter-list">Parameter list</a></li>
<li class="toctree-l2"><a class="reference internal" href="#units">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vertical-units">Vertical Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="#false-easting-northing">False Easting/Northing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lon-wrap-over-longitude-wrapping">lon_wrap, over - Longitude Wrapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pm-prime-meridian">pm - Prime Meridian</a></li>
<li class="toctree-l2"><a class="reference internal" href="#towgs84-datum-transformation-to-wgs84">towgs84 - Datum transformation to WGS84</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nadgrids-grid-based-datum-adjustments">nadgrids - Grid Based Datum Adjustments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#skipping-missing-grids">Skipping Missing Grids</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-null-grid">The null Grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="#downloading-and-installing-grids">Downloading and Installing Grids</a></li>
<li class="toctree-l3"><a class="reference internal" href="#caveats">Caveats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#axis-orientation">Axis orientation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="geodesic.html">Geodesic Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="grids.html">Grids</a></li>
<li class="toctree-l1"><a class="reference internal" href="htpd.html">HTPD</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">proj.4</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Parameters</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="parameters">
<span id="id1"></span><h1>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Date:</th><td class="field-body">01/28/2016</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#parameters" id="id2">Parameters</a><ul>
<li><a class="reference internal" href="#parameter-list" id="id3">Parameter list</a></li>
<li><a class="reference internal" href="#units" id="id4">Units</a></li>
<li><a class="reference internal" href="#vertical-units" id="id5">Vertical Units</a></li>
<li><a class="reference internal" href="#false-easting-northing" id="id6">False Easting/Northing</a></li>
<li><a class="reference internal" href="#lon-wrap-over-longitude-wrapping" id="id7">lon_wrap, over - Longitude Wrapping</a></li>
<li><a class="reference internal" href="#pm-prime-meridian" id="id8">pm - Prime Meridian</a></li>
<li><a class="reference internal" href="#towgs84-datum-transformation-to-wgs84" id="id9">towgs84 - Datum transformation to WGS84</a></li>
<li><a class="reference internal" href="#nadgrids-grid-based-datum-adjustments" id="id10">nadgrids - Grid Based Datum Adjustments</a><ul>
<li><a class="reference internal" href="#skipping-missing-grids" id="id11">Skipping Missing Grids</a></li>
<li><a class="reference internal" href="#the-null-grid" id="id12">The null Grid</a></li>
<li><a class="reference internal" href="#downloading-and-installing-grids" id="id13">Downloading and Installing Grids</a></li>
<li><a class="reference internal" href="#caveats" id="id14">Caveats</a></li>
</ul>
</li>
<li><a class="reference internal" href="#axis-orientation" id="id15">Axis orientation</a></li>
</ul>
</li>
</ul>
</div>
<p>This document attempts to describe a variety of the PROJ.4 parameters which can
be applied to all, or many coordinate system definitions.  This document does
not attempt to describe the parameters particular to particular projection
types.  Some of these can be found in the GeoTIFF <a class="reference external" href="http://www.remotesensing.org/geotiff/proj_list/">Projections Transform List</a>.  The definitive
documentation for most parameters is Gerald’s original documentation available
from the main PROJ.4 page.</p>
<div class="section" id="parameter-list">
<h2>Parameter list<a class="headerlink" href="#parameter-list" title="Permalink to this headline">¶</a></h2>
<p>Common parameters:</p>
<p>(this PROJ.4 distribution including <cite>cs2cs</cite> and datum support)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>+a         Semimajor radius of the ellipsoid axis
+alpha     ? Used with Oblique Mercator and possibly a few others
+axis      Axis orientation (new in 4.8.0)
+b         Semiminor radius of the ellipsoid axis
+datum     Datum name (see `proj -ld`)
+ellps     Ellipsoid name (see `proj -le`)
+k         Scaling factor (old name)
+k_0       Scaling factor (new name)
+lat_0     Latitude of origin
+lat_1     Latitude of first standard parallel
+lat_2     Latitude of second standard parallel
+lat_ts    Latitude of true scale
+lon_0     Central meridian
+lonc      ? Longitude used with Oblique Mercator and possibly a few others
+lon_wrap  Center longitude to use for wrapping (see below)
+nadgrids  Filename of NTv2 grid file to use for datum transforms (see below)
+no_defs   Don&#39;t use the /usr/share/proj/proj_def.dat defaults file
+over      Allow longitude output outside -180 to 180 range, disables wrapping (see below)
+pm        Alternate prime meridian (typically a city name, see below)
+proj      Projection name (see `proj -l`)
+south     Denotes southern hemisphere UTM zone
+to_meter  Multiplier to convert map units to 1.0m
+towgs84   3 or 7 term datum transform parameters (see below)
+units     meters, US survey feet, etc.
+vto_meter vertical conversion to meters.
+vunits    vertical units.
+x_0       False easting
+y_0       False northing
+zone      UTM zone
</pre></div>
</div>
<p>Extended list provided by Gerald Evenden “grepped out of the RCS directory”.</p>
<p>(libproj4 by G.E.; no datum support)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>+a         Semimajor radius of the ellipsoid axis
+alpha     ? Used with Oblique Mercator and possibly a few others
+azi
+b         Semiminor radius of the ellipsoid axis
+belgium
+beta
+czech
+e         Eccentricity of the ellipsoid = sqrt(1 - b^2/a^2) = sqrt( f*(2-f) )
+ellps     Ellipsoid name (see `proj -le`)
+es        Eccentricity of the ellipsoid squared
+f         Flattening of the ellipsoid = 1-sqrt(1-e^2) (often presented as an inverse, e.g. 1/298)
+geoc
+guam
+h
+k         Scaling factor (old name)
+K
+k_0       Scaling factor (new name)
+lat_0     Latitude of origin
+lat_1     Latitude of first standard parallel
+lat_2     Latitude of second standard parallel
+lat_b
+lat_t
+lat_ts    Latitude of true scale
+lon_0     Central meridian
+lon_1
+lon_2
+lonc      ? Longitude used with Oblique Mercator and possibly a few others
+lsat
+m
+M
+n
+no_cut
+no_off    No offset. If present, do not offset origin to center of projection. Only used in Oblique Mercator projection.
+no_uoff   Backwards compatible version of +no_off.
+no_rot
+ns
+o_alpha
+o_lat_1
+o_lat_2
+o_lat_c
+o_lat_p
+o_lon_1
+o_lon_2
+o_lon_c
+o_lon_p
+o_proj
+over
+p
+path
+proj      Projection name (see `proj -l`)
+q
+R
+R_a
+R_A       Compute radius such that the area of the sphere is the same as the area of the ellipsoid
+rf        Reciprocal of the ellipsoid flattening term (e.g. 298)
+R_g
+R_h
+R_lat_a
+R_lat_g
+rot
+R_V
+s
+south     Denotes southern hemisphere UTM zone
+sym
+t
+theta
+tilt
+to_meter  Multiplier to convert map units to 1.0m
+units     meters, US survey feet, etc.
+vopt
+W
+westo
+x_0       False easting
+y_0       False northing
+zone      UTM zone
</pre></div>
</div>
<p>See GE’s <a class="reference external" href="http://members.verizon.net/~gerald.evenden/proj4/manual.pdf">libproj4
manual</a> for
further details (<a class="reference external" href="http://web.archive.org/web/20080807155507/http://members.verizon.net/~gerald.evenden/proj4/manual.pdf">copy in wayback machine</a>).</p>
<p>Further details for projection at <a class="reference external" href="http://www.remotesensing.org/geotiff/proj_list/">http://www.remotesensing.org/geotiff/proj_list/</a></p>
</div>
<div class="section" id="units">
<h2>Units<a class="headerlink" href="#units" title="Permalink to this headline">¶</a></h2>
<p>Horizontal units can be specified using the +units= keyword with a symbolic
name for a unit (ie. us-ft).  Alternatively the translation to meters can be
specified with the +to_meter keyword (ie. 0.304800609601219 for US feet).  The
<code class="docutils literal"><span class="pre">-lu</span></code> argument to cs2cs or proj can be used to list symbolic unit names.
The default unit for projected coordinates is the meter.
A few special projections deviate from this behaviour, most notably the
latlong pseudo-projection that returns degrees.</p>
</div>
<div class="section" id="vertical-units">
<h2>Vertical Units<a class="headerlink" href="#vertical-units" title="Permalink to this headline">¶</a></h2>
<p>Vertical (Z) units can be specified using the <code class="docutils literal"><span class="pre">+vunits=</span></code> keyword with a
symbolic name for a unit (ie. <code class="docutils literal"><span class="pre">us-ft</span></code>).  Alternatively the translation to
meters can be specified with the <code class="docutils literal"><span class="pre">+vto_meter</span></code> keyword (ie. 0.304800609601219
for US feet).  The <code class="docutils literal"><span class="pre">-lu</span></code> argument to cs2cs or proj can be used to list symbolic
unit names.  If no vertical units are specified, the vertical units will
default to be the same as the horizontal coordinates.</p>
<p>Note that vertical unit transformations are only supported in pj_transform()
and programs built on that such as cs2cs.  The low level projections functions
pj_fwd() and pj_inv() and programs using them directly such as proj do not
handle vertical units at all.</p>
</div>
<div class="section" id="false-easting-northing">
<h2>False Easting/Northing<a class="headerlink" href="#false-easting-northing" title="Permalink to this headline">¶</a></h2>
<p>Virtually all coordinate systems allow for the presence of a false easting
(<code class="docutils literal"><span class="pre">+x_0</span></code>) and northing (<code class="docutils literal"><span class="pre">+y_0</span></code>).  Note that these values are always expressed in
meters even if the coordinate system is some other units.  Some coordinate
systems (such as UTM) have implicit false easting and northing values.</p>
</div>
<div class="section" id="lon-wrap-over-longitude-wrapping">
<h2>lon_wrap, over - Longitude Wrapping<a class="headerlink" href="#lon-wrap-over-longitude-wrapping" title="Permalink to this headline">¶</a></h2>
<p>By default PROJ.4 wraps output longitudes in the range -180 to 180.  The +over
switch can be used to disable the default wrapping which is done at a low level
- in <code class="docutils literal"><span class="pre">pj_inv()</span></code>.  This is particularly useful with projections like eqc where
it would desirable for X values past -20000000 (roughly) to continue past
-180 instead of wrapping to +180.</p>
<p>The <code class="docutils literal"><span class="pre">+lon_wrap</span></code> option can be used to provide an alternative means of doing
longitude wrapping within <code class="docutils literal"><span class="pre">pj_transform()</span></code>.  The argument to this option is a
center longitude.  So <code class="docutils literal"><span class="pre">+lon_wrap=180</span></code> means wrap longitudes in the range 0 to
360.  Note that <code class="docutils literal"><span class="pre">+over</span></code> does <strong>not</strong> disable <code class="docutils literal"><span class="pre">+lon_wrap</span></code>.</p>
</div>
<div class="section" id="pm-prime-meridian">
<h2>pm - Prime Meridian<a class="headerlink" href="#pm-prime-meridian" title="Permalink to this headline">¶</a></h2>
<p>A prime meridian may be declared indicating the offset between the prime
meridian of the declared coordinate system and that of greenwich.  A prime
meridian is clared using the “pm” parameter, and may be assigned a symbolic
name, or the longitude of the alternative prime meridian relative to greenwich.</p>
<p>Currently prime meridian declarations are only utilized by the
<code class="docutils literal"><span class="pre">pj_transform()</span></code> API call, not the <code class="docutils literal"><span class="pre">pj_inv()</span></code> and <code class="docutils literal"><span class="pre">pj_fwd()</span></code> calls.
Consequently the user utility <code class="docutils literal"><span class="pre">cs2cs</span></code> does honour prime meridians but the
proj user utility ignores them.</p>
<p>The following predeclared prime meridian names are supported.  These can be
listed using the cs2cs argument -lm.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">greenwich</span> <span class="mi">0</span><span class="n">dE</span>
   <span class="n">lisbon</span> <span class="mi">9</span><span class="n">d07</span><span class="s1">&#39;54.862&quot;W</span>
    <span class="n">paris</span> <span class="mi">2</span><span class="n">d20</span><span class="s1">&#39;14.025&quot;E</span>
   <span class="n">bogota</span> <span class="mi">74</span><span class="n">d04</span><span class="s1">&#39;51.3&quot;E</span>
   <span class="n">madrid</span> <span class="mi">3</span><span class="n">d41</span><span class="s1">&#39;16.48&quot;W</span>
     <span class="n">rome</span> <span class="mi">12</span><span class="n">d27</span><span class="s1">&#39;8.4&quot;E</span>
     <span class="n">bern</span> <span class="mi">7</span><span class="n">d26</span><span class="s1">&#39;22.5&quot;E</span>
  <span class="n">jakarta</span> <span class="mi">106</span><span class="n">d48</span><span class="s1">&#39;27.79&quot;E</span>
    <span class="n">ferro</span> <span class="mi">17</span><span class="n">d40</span><span class="s1">&#39;W</span>
 <span class="n">brussels</span> <span class="mi">4</span><span class="n">d22</span><span class="s1">&#39;4.71&quot;E</span>
<span class="n">stockholm</span> <span class="mi">18</span><span class="n">d3</span><span class="s1">&#39;29.8&quot;E</span>
   <span class="n">athens</span> <span class="mi">23</span><span class="n">d42</span><span class="s1">&#39;58.815&quot;E</span>
     <span class="n">oslo</span> <span class="mi">10</span><span class="n">d43</span><span class="s1">&#39;22.5&quot;E</span>
</pre></div>
</div>
<p>Example of use.  The location <code class="docutils literal"><span class="pre">long=0</span></code>, <code class="docutils literal"><span class="pre">lat=0</span></code> in the greenwich based lat/long
coordinates is translated to lat/long coordinates with Madrid as the prime
meridian.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cs2cs</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">datum</span><span class="o">=</span><span class="n">WGS84</span> <span class="o">+</span><span class="n">to</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">datum</span><span class="o">=</span><span class="n">WGS84</span> <span class="o">+</span><span class="n">pm</span><span class="o">=</span><span class="n">madrid</span>
<span class="mi">0</span> <span class="mi">0</span>                           <span class="o">&lt;</span><span class="n">i</span><span class="o">&gt;</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span><span class="o">&lt;/</span><span class="n">i</span><span class="o">&gt;</span>
<span class="mi">3</span><span class="n">d41</span><span class="s1">&#39;16.48&quot;E    0dN 0.000     &lt;i&gt;(output)&lt;/i&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="towgs84-datum-transformation-to-wgs84">
<h2>towgs84 - Datum transformation to WGS84<a class="headerlink" href="#towgs84-datum-transformation-to-wgs84" title="Permalink to this headline">¶</a></h2>
<p>Datum shifts can be approximated by 3 parameter spatial translations (in
geocentric space), or 7 parameter shifts (translation + rotation + scaling).
The parameters to describe this can be described using the towgs84 parameter.</p>
<p>In the three parameter case, the three arguments are the translations to the
geocentric location in meters.</p>
<p>For instance, the following demonstrates converting from the Greek GGRS87 datum
to WGS84.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cs2cs</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">GRS80</span> <span class="o">+</span><span class="n">towgs84</span><span class="o">=-</span><span class="mf">199.87</span><span class="p">,</span><span class="mf">74.79</span><span class="p">,</span><span class="mf">246.62</span>
    <span class="o">+</span><span class="n">to</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">datum</span><span class="o">=</span><span class="n">WGS84</span>
<span class="mi">20</span> <span class="mi">35</span>
<span class="mi">20</span><span class="n">d0</span><span class="s1">&#39;5.467&quot;E    35d0&#39;</span><span class="mf">9.575</span><span class="s2">&quot;N 8.570</span>
</pre></div>
</div>
<p>The EPSG database provides this example for transforming from WGS72 to WGS84
using an approximated 7 parameter transformation.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cs2cs</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">WGS72</span> <span class="o">+</span><span class="n">towgs84</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">4.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.554</span><span class="p">,</span><span class="mf">0.219</span> \
    <span class="o">+</span><span class="n">to</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">datum</span><span class="o">=</span><span class="n">WGS84</span>
<span class="mi">4</span> <span class="mi">55</span>
<span class="mi">4</span><span class="n">d0</span><span class="s1">&#39;0.554&quot;E     55d0&#39;</span><span class="mf">0.09</span><span class="s2">&quot;N 3.223</span>
</pre></div>
</div>
<p>The seven parameter case uses <code class="docutils literal"><span class="pre">delta_x</span></code>, <code class="docutils literal"><span class="pre">delta_y</span></code>, <code class="docutils literal"><span class="pre">delta_z</span></code>, <code class="docutils literal"><span class="pre">Rx</span> <span class="pre">-</span>
<span class="pre">rotation</span> <span class="pre">X</span></code>, <code class="docutils literal"><span class="pre">Ry</span> <span class="pre">-</span> <span class="pre">rotation</span> <span class="pre">Y</span></code>, <code class="docutils literal"><span class="pre">Rz</span> <span class="pre">-</span> <span class="pre">rotation</span> <span class="pre">Z</span></code>, <code class="docutils literal"><span class="pre">M_BF</span> <span class="pre">-</span> <span class="pre">Scaling</span></code>.
The three translation parameters are in meters as in the three parameter case.
The rotational parameters are in seconds of arc.  The scaling is apparently the
scale change in parts per million.</p>
<p>A more complete discussion of the 3 and 7 parameter transformations can be
found in the EPSG database (trf_method’s 9603 and 9606).  Within PROJ.4 the
following calculations are used to apply the <code class="docutils literal"><span class="pre">towgs84</span></code> transformation (going
to WGS84).  The x, y and z coordinates are in geocentric coordinates.</p>
<p>Three parameter transformation (simple offsets):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">[</span><span class="n">io</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">io</span><span class="p">]</span> <span class="o">+</span> <span class="n">defn</span><span class="o">-&gt;</span><span class="n">datum_params</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="n">y</span><span class="p">[</span><span class="n">io</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">io</span><span class="p">]</span> <span class="o">+</span> <span class="n">defn</span><span class="o">-&gt;</span><span class="n">datum_params</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="n">z</span><span class="p">[</span><span class="n">io</span><span class="p">]</span> <span class="o">=</span> <span class="n">z</span><span class="p">[</span><span class="n">io</span><span class="p">]</span> <span class="o">+</span> <span class="n">defn</span><span class="o">-&gt;</span><span class="n">datum_params</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
</pre></div>
</div>
<p>Seven parameter transformation (translation, rotation and scaling):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#define Dx_BF (defn-&gt;datum_params[0])</span>
<span class="c1">#define Dy_BF (defn-&gt;datum_params[1])</span>
<span class="c1">#define Dz_BF (defn-&gt;datum_params[2])</span>
<span class="c1">#define Rx_BF (defn-&gt;datum_params[3])</span>
<span class="c1">#define Ry_BF (defn-&gt;datum_params[4])</span>
<span class="c1">#define Rz_BF (defn-&gt;datum_params[5])</span>
<span class="c1">#define M_BF  (defn-&gt;datum_params[6])</span>

<span class="n">x_out</span> <span class="o">=</span> <span class="n">M_BF</span><span class="o">*</span><span class="p">(</span>       <span class="n">x</span><span class="p">[</span><span class="n">io</span><span class="p">]</span> <span class="o">-</span> <span class="n">Rz_BF</span><span class="o">*</span><span class="n">y</span><span class="p">[</span><span class="n">io</span><span class="p">]</span> <span class="o">+</span> <span class="n">Ry_BF</span><span class="o">*</span><span class="n">z</span><span class="p">[</span><span class="n">io</span><span class="p">])</span> <span class="o">+</span> <span class="n">Dx_BF</span><span class="p">;</span>
<span class="n">y_out</span> <span class="o">=</span> <span class="n">M_BF</span><span class="o">*</span><span class="p">(</span> <span class="n">Rz_BF</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="n">io</span><span class="p">]</span> <span class="o">+</span>       <span class="n">y</span><span class="p">[</span><span class="n">io</span><span class="p">]</span> <span class="o">-</span> <span class="n">Rx_BF</span><span class="o">*</span><span class="n">z</span><span class="p">[</span><span class="n">io</span><span class="p">])</span> <span class="o">+</span> <span class="n">Dy_BF</span><span class="p">;</span>
<span class="n">z_out</span> <span class="o">=</span> <span class="n">M_BF</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="n">Ry_BF</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="n">io</span><span class="p">]</span> <span class="o">+</span> <span class="n">Rx_BF</span><span class="o">*</span><span class="n">y</span><span class="p">[</span><span class="n">io</span><span class="p">]</span> <span class="o">+</span>       <span class="n">z</span><span class="p">[</span><span class="n">io</span><span class="p">])</span> <span class="o">+</span> <span class="n">Dz_BF</span><span class="p">;</span>
</pre></div>
</div>
<p>Note that EPSG method 9607 (coordinate frame rotation) coefficients can be
converted to EPSG method 9606 (position vector 7-parameter) supported by PROJ.4
by reversing the sign of the rotation vectors.  The methods are otherwise the
same.</p>
</div>
<div class="section" id="nadgrids-grid-based-datum-adjustments">
<h2>nadgrids - Grid Based Datum Adjustments<a class="headerlink" href="#nadgrids-grid-based-datum-adjustments" title="Permalink to this headline">¶</a></h2>
<p>In many places (notably North America and Austrialia) national geodetic
organizations provide grid shift files for converting between different datums,
such as NAD27 to NAD83.  These grid shift files include a shift to be applied
at each grid location. Actually grid shifts are normally computed based on an
interpolation between the containing four grid points.</p>
<p>PROJ.4 currently supports use of grid shift files for shifting between datums
and WGS84 under some circumstances.  The grid shift table formats are ctable
(the binary format produced by the PROJ.4 <code class="docutils literal"><span class="pre">nad2bin</span></code> program), NTv1 (the old
Canadian format), and NTv2 (<code class="docutils literal"><span class="pre">.gsb</span></code> - the new Canadian and Australian format).</p>
<p>Use of grid shifts is specified using the <code class="docutils literal"><span class="pre">nadgrids</span></code> keyword in a coordinate
system definition.  For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">cs2cs</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">clrk66</span> <span class="o">+</span><span class="n">nadgrids</span><span class="o">=</span><span class="n">ntv1_can</span><span class="o">.</span><span class="n">dat</span> \
    <span class="o">+</span><span class="n">to</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">GRS80</span> <span class="o">+</span><span class="n">datum</span><span class="o">=</span><span class="n">NAD83</span> <span class="o">&lt;&lt;</span> <span class="n">EOF</span>
<span class="o">-</span><span class="mi">111</span> <span class="mi">50</span>
<span class="n">EOF</span>
<span class="mi">111</span><span class="n">d0</span><span class="s1">&#39;2.952&quot;W   50d0&#39;</span><span class="mf">0.111</span><span class="s2">&quot;N 0.000</span>
</pre></div>
</div>
<p>In this case the <code class="docutils literal"><span class="pre">/usr/local/share/proj/ntv1_can.dat</span></code> grid shift file was
loaded, and used to get a grid shift value for the selected point.</p>
<p>It is possible to list multiple grid shift files, in which case each will be
tried in turn till one is found that contains the point being transformed.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cs2cs</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">clrk66</span> \
          <span class="o">+</span><span class="n">nadgrids</span><span class="o">=</span><span class="n">conus</span><span class="p">,</span><span class="n">alaska</span><span class="p">,</span><span class="n">hawaii</span><span class="p">,</span><span class="n">stgeorge</span><span class="p">,</span><span class="n">stlrnc</span><span class="p">,</span><span class="n">stpaul</span> \
    <span class="o">+</span><span class="n">to</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">GRS80</span> <span class="o">+</span><span class="n">datum</span><span class="o">=</span><span class="n">NAD83</span> <span class="o">&lt;&lt;</span> <span class="n">EOF</span>
<span class="o">-</span><span class="mi">111</span> <span class="mi">44</span>
<span class="n">EOF</span>
<span class="mi">111</span><span class="n">d0</span><span class="s1">&#39;2.788&quot;W   43d59&#39;</span><span class="mf">59.725</span><span class="s2">&quot;N 0.000</span>
</pre></div>
</div>
<div class="section" id="skipping-missing-grids">
<h3>Skipping Missing Grids<a class="headerlink" href="#skipping-missing-grids" title="Permalink to this headline">¶</a></h3>
<p>The special prefix <code class="docutils literal"><span class="pre">&#64;</span></code> may be prefixed to a grid to make it optional.  If it
not found, the search will continue to the next grid.  Normally any grid not
found will cause an error.  For instance, the following would use the
<code class="docutils literal"><span class="pre">ntv2_0.gsb</span></code> file if available (see [[NonFreeGrids]]), otherwise it would
fallback to using the <code class="docutils literal"><span class="pre">ntv1_can.dat</span></code> file.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cs2cs</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">clrk66</span> <span class="o">+</span><span class="n">nadgrids</span><span class="o">=</span><span class="nd">@ntv2_0</span><span class="o">.</span><span class="n">gsb</span><span class="p">,</span><span class="n">ntv1_can</span><span class="o">.</span><span class="n">dat</span> \
    <span class="o">+</span><span class="n">to</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">GRS80</span> <span class="o">+</span><span class="n">datum</span><span class="o">=</span><span class="n">NAD83</span> <span class="o">&lt;&lt;</span> <span class="n">EOF</span>
<span class="o">-</span><span class="mi">111</span> <span class="mi">50</span>
<span class="n">EOF</span>
<span class="mi">111</span><span class="n">d0</span><span class="s1">&#39;3.006&quot;W   50d0&#39;</span><span class="mf">0.103</span><span class="s2">&quot;N 0.000</span>
</pre></div>
</div>
</div>
<div class="section" id="the-null-grid">
<h3>The null Grid<a class="headerlink" href="#the-null-grid" title="Permalink to this headline">¶</a></h3>
<p>A special <code class="docutils literal"><span class="pre">null</span></code> grid shift file is shift with releases after 4.4.6 (not
inclusive).  This file provides a zero shift for the whole world.  It may be
listed at the end of a nadgrids file list if you want a zero shift to be
applied to points outside the valid region of all the other grids.  Normally if
no grid is found that contains the point to be transformed an error will occur.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cs2cs</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">clrk66</span> <span class="o">+</span><span class="n">nadgrids</span><span class="o">=</span><span class="n">conus</span><span class="p">,</span><span class="n">null</span> \
    <span class="o">+</span><span class="n">to</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">GRS80</span> <span class="o">+</span><span class="n">datum</span><span class="o">=</span><span class="n">NAD83</span> <span class="o">&lt;&lt;</span> <span class="n">EOF</span>
<span class="o">-</span><span class="mi">111</span> <span class="mi">45</span>
<span class="n">EOF</span>
<span class="mi">111</span><span class="n">d0</span><span class="s1">&#39;3.006&quot;W   50d0&#39;</span><span class="mf">0.103</span><span class="s2">&quot;N 0.000</span>

<span class="n">cs2cs</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">clrk66</span> <span class="o">+</span><span class="n">nadgrids</span><span class="o">=</span><span class="n">conus</span><span class="p">,</span><span class="n">null</span> \
    <span class="o">+</span><span class="n">to</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">latlong</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">GRS80</span> <span class="o">+</span><span class="n">datum</span><span class="o">=</span><span class="n">NAD83</span> <span class="o">&lt;&lt;</span> <span class="n">EOF</span>
<span class="o">-</span><span class="mi">111</span> <span class="mi">44</span>
<span class="o">-</span><span class="mi">111</span> <span class="mi">55</span>
<span class="n">EOF</span>
<span class="mi">111</span><span class="n">d0</span><span class="s1">&#39;2.788&quot;W   43d59&#39;</span><span class="mf">59.725</span><span class="s2">&quot;N 0.000</span>
<span class="mi">111</span><span class="n">dW</span>   <span class="mi">55</span><span class="n">dN</span> <span class="mf">0.000</span>
</pre></div>
</div>
</div>
<div class="section" id="downloading-and-installing-grids">
<h3>Downloading and Installing Grids<a class="headerlink" href="#downloading-and-installing-grids" title="Permalink to this headline">¶</a></h3>
<p>The source distribution of PROJ.4 contains only the ntv1_can.dat file.  To get
the set of US grid shift files it is necessary to download an additional
distribution of files from the PROJ.4 site, such as
<a class="reference external" href="ftp://ftp.remotesensing.org/pub/proj/proj-nad27-1.1.tar.gz">ftp://ftp.remotesensing.org/pub/proj/proj-nad27-1.1.tar.gz</a>.  Overlay it on the
PROJ.4 source distribution, and re-configure, compile and install.  The
distributed ASCII .lla files are converted into binary (platform specific)
files that are installed.  On windows using the nmake /f makefile.vc nadshift
command in the projsrc directory to build and install these files.</p>
<p>It appears we can’t redistribute the Canadian NTv2 grid shift file freely,
though it is better than the NTv1 file.  However, end users can download it for
free from the <a class="reference external" href="http://www.geod.nrcan.gc.ca/tools-outils/ntv2_e.php">NRCan web site</a>.  After downloading
it, just dump it in the data directory with the other installed data files
(usually <cite>/usr/local/share/proj</cite>). See [[NonFreeGrids]] for details.</p>
</div>
<div class="section" id="caveats">
<h3>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Where grids overlap (such as conus and ntv1_can.dat for instance) the first
found for a point will be used regardless of whether it is appropriate or
not.  So, for instance, <code class="docutils literal"><span class="pre">`+nadgrids=ntv1_can.dat`</span></code>,conus would result in
the Canadian data being used for some areas in the northern United States
even though the conus data is the approved data to use for the area.
Careful selection of files and file order is necessary.  In some cases
border spanning datasets may need to be pre-segmented into Canadian and
American points so they can be properly grid shifted</li>
<li>There are additional grids for shifting between NAD83 and various HPGN
versions of the NAD83 datum.  Use of these haven’t been tried recently so
you may encounter problems.  The FL.lla, WO.lla, MD.lla, TN.lla and WI.lla
are examples of high precision grid shifts.  Take care!</li>
<li>Additional detail on the grid shift being applied can be found by setting
the PROJ_DEBUG environment variable to a value.  This will result in output
to stderr on what grid is used to shift points, the bounds of the various
grids loaded and so forth</li>
<li>PROJ.4 always assumes that grids contain a shift <strong>to</strong>  NAD83 (essentially
WGS84).  Other types of grids might or might not be usable</li>
</ul>
</div>
</div>
<div class="section" id="axis-orientation">
<h2>Axis orientation<a class="headerlink" href="#axis-orientation" title="Permalink to this headline">¶</a></h2>
<p>Starting in PROJ 4.8.0, the +axis argument can be used to control the axis
orientation of the coordinate system.  The default orientation is “easting,
northing, up” but directions can be flipped, or axes flipped using combinations
of the axes in the +axis switch.  The values are:</p>
<ul class="simple">
<li>“e” - Easting</li>
<li>“w” - Westing</li>
<li>“n” - Northing</li>
<li>“s” - Southing</li>
<li>“u” - Up</li>
<li>“d” - Down</li>
</ul>
<p>They can be combined in +axis in forms like:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">+axis=enu</span></code> - the default easting, northing, elevation.</li>
<li><code class="docutils literal"><span class="pre">+axis=neu</span></code> - northing, easting, up - useful for “lat/long” geographic
coordinates, or south orientated transverse mercator.</li>
<li><code class="docutils literal"><span class="pre">+axis=wnu</span></code> - westing, northing, up - some planetary coordinate systems
have “west positive” coordinate systems</li>
</ul>
<p>Note that the <code class="docutils literal"><span class="pre">+axis</span></code> argument only applies to coordinate transformations done
through <code class="docutils literal"><span class="pre">pj_transform()</span></code> (so it works with <code class="docutils literal"><span class="pre">cs2cs</span></code>, but not with the proj
commandline program).</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="geodesic.html" class="btn btn-neutral float-right" title="Geodesic Calculations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="projections/wintri.html" class="btn btn-neutral" title="Winkel Tripel" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1986?-2016.
      Last updated on 18 Jul 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'4.9.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>